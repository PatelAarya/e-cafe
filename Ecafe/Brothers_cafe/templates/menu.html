{% extends 'base.html' %}

{% load static %}

{% block content %}


<header id="fh5co-header" class="fh5co-cover js-fullheight" role="banner"
	style="background-image: url({% static 'images/food_3.jpeg' %});" data-stellar-background-ratio="0.5">
	<div class="overlay"></div>
	<div class="container">
		<div class="row">
			<div class="col-md-12 text-center">
				<div class="display-t js-fullheight">
					<div class="display-tc js-fullheight animate-box" data-animate-effect="fadeIn">
						<h1>See <em>Our</em> Menu</h1>
						<h2>Brought to you by <a href="http://freehtml5.co/" target="_blank">freehtml5.co</a></h2>
					</div>
				</div>
			</div>
		</div>
	</div>
</header>








<div id="fh5co-featured-menu" class="fh5co-section">
	<div class="container">
		<div class="row">
			<div class="col-md-12 fh5co-heading animate-box">
				<h2>Our Delicous Menu</h2>
				<div class="row">
					<div class="col-md-6">
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reiciendis ab debitis sit itaque
							totam, a maiores nihil, nulla magnam porro minima officiis! Doloribus aliquam voluptates
							corporis et tempora consequuntur ipsam, itaque, nesciunt similique commodi omnis. Ad magni
							perspiciatis, voluptatum repellat.</p>
					</div>
				</div>
			</div>







			<ul id="menu-flters">
				{% for i in cat %}
				<li><a href="/Brothers_cafe/menu/?cat={{i.id}}">{{ i.category_id }} {{ i.category_name }}</a></li>
				{% endfor %}
			</ul>





			<div class="col-md-3 col-sm-6 col-xs-6 col-xxs-12 fh5co-item-wrap">
				{% for i in form|slice:"0::4" %}
				<div class="fh5co-item animate-box">
					<img src="{{ i.image.url }}" class="img-responsive"
						alt="Free Restaurant Bootstrap Website Template by FreeHTML5.co">
					<h3 id="namepr{{ i.id }}">{{ i.food_name }}</h3>
					<span id="pricepr{{ i.id }}" class="fh5co-price">$ {{ i.price }}<sup>.00</sup></span>
					<span id="divpr{{ i.id }}" class="divpr">
					<button class="btn btn-success cart" id="pr{{i.id}}">Add to cart</button>
					</span>	
					<p>{{ i.description }}</p>
				</div>
				{% endfor %}
			</div>

			<div class="col-md-3 col-sm-6 col-xs-6 col-xxs-12 fh5co-item-wrap">
				{% for i in form|slice:"1::4" %}
				{% if forloop.counter == 1 %}
				<div class="fh5co-item margin_top animate-box">
					<img src="{{ i.image.url }}" class="img-responsive"
						alt="Free Restaurant Bootstrap Website Template by FreeHTML5.co">
					<h3 id="namepr{{ i.id }}">{{ i.food_name }}</h3>
					<span id="pricepr{{ i.id }}" class="fh5co-price">$ {{ i.price }}<sup>.00</sup></span>
					<span id="divpr{{ i.id }}" class="divpr">
						<button class="btn btn-success cart" id="pr{{i.id}}">Add to cart</button>
						</span>	
					<p>{{ i.description }}</p>
				</div>
				{% else %}
				<div class="fh5co-item animate-box">
					<img src="{{ i.image.url }}" class="img-responsive"
						alt="Free Restaurant Bootstrap Website Template by FreeHTML5.co">
					<h3 id="namepr{{ i.id }}">{{ i.food_name }}</h3>
					<span id="pricepr{{ i.id }}" class="fh5co-price">$ {{ i.price }}<sup>.00</sup></span>
					<span id="divpr{{ i.id }}" class="divpr">
						<button class="btn btn-success cart" id="pr{{i.id}}">Add to cart</button>
						</span>	
					<p>{{ i.description }}</p>
				</div>
				{% endif %}
				{% endfor %}
			</div>
			<div class="clearfix visible-sm-block visible-xs-block"></div>
			<div class="col-md-3 col-sm-6 col-xs-6 col-xxs-12 fh5co-item-wrap">
				{% for i in form|slice:"2::4" %}
				<div class="fh5co-item animate-box">
					<img src="{{ i.image.url }}" class="img-responsive"
						alt="Free Restaurant Bootstrap Website Template by FreeHTML5.co">
					<h3 id="namepr{{ i.id }}">{{ i.food_name }}</h3>
					<span id="pricepr{{ i.id }}" class="fh5co-price">$ {{ i.price }}<sup>.00</sup></span>
					<span id="divpr{{ i.id }}" class="divpr">
						<button class="btn btn-success cart" id="pr{{i.id}}">Add to cart</button>
						</span>	
					<p>{{ i.description }}</p>
				</div>
				{% endfor %}
			</div>

			<div class="col-md-3 col-sm-6 col-xs-6 col-xxs-12 fh5co-item-wrap">
				{% for i in form|slice:"3::4" %}
				{% if forloop.counter == 1 %}
				<div class="fh5co-item margin_top animate-box">
					<img src="{{ i.image.url }}" class="img-responsive"
						alt="Free Restaurant Bootstrap Website Template by FreeHTML5.co">
					<h3 id="namepr{{ i.id }}">{{ i.food_name }}</h3>
					<span id="pricepr{{ i.id }}" class="fh5co-price">$ {{ i.price }}<sup>.00</sup></span>
					<span id="divpr{{ i.id }}" class="divpr">
						<button class="btn btn-success cart" id="pr{{i.id}}">Add to cart</button>
						</span>	
					<p>{{ i.description }}</p>
				</div>
				{% else %}
				<div class="fh5co-item animate-box">
					<img src="{{ i.image.url }}" class="img-responsive"
						alt="Free Restaurant Bootstrap Website Template by FreeHTML5.co">
					<h3 id="namepr{{ i.id }}">{{ i.food_name }}</h3>
					<span id="pricepr{{ i.id }}" class="fh5co-price">$ {{ i.price }}<sup>.00</sup></span>
					<span id="divpr{{ i.id }}" class="divpr">
						<button class="btn btn-success cart" id="pr{{i.id}}">Add to cart</button>
						</span>	
					<p>{{ i.description }}</p>
				</div>
				{% endif %}
				{% endfor %}
			</div>
		</div>
	</div>
</div>

<div id="fh5co-featured-testimony" class="fh5co-section">
	<div class="container">
		<div class="row">
			<div class="col-md-12 fh5co-heading animate-box">
				<h2>Testimony</h2>
				<div class="row">
					<div class="col-md-6">
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reiciendis ab debitis sit itaque
							totam, a maiores nihil, nulla magnam porro minima officiis! Doloribus aliquam voluptates
							corporis et tempora consequuntur ipsam, itaque, nesciunt similique commodi omnis.</p>
					</div>
				</div>
			</div>

			<div class="col-md-5 animate-box img-to-responsive">
				<img src="{% static 'images/person_1.jpg' %}" alt="">

			</div>
			<div class="col-md-7 animate-box">
				<blockquote>
					<p> &ldquo; Quantum ipsum dolor sit amet, consectetur adipisicing elit. Reiciendis ab debitis sit
						itaque totam, a maiores nihil, nulla magnam porro minima officiis! Doloribus aliquam voluptates
						corporis et tempora consequuntur ipsam. &rdquo;</p>
					<p class="author"><cite>&mdash; Jane Smith</cite></p>
				</blockquote>
			</div>
		</div>
	</div>
</div>


<div id="fh5co-started" class="fh5co-section animate-box"
	style="background-image: url({% static 'images/hero_1.jpeg' %});" data-stellar-background-ratio="0.5">
	<div class="overlay"></div>
	<div class="container">
		<div class="row animate-box">
			<div class="col-md-8 col-md-offset-2 text-center fh5co-heading">
				<h2>Book a Table</h2>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Recusandae enim quae vitae cupiditate,
					sequi quam ea id dolor reiciendis consectetur repudiandae. Rem quam, repellendus veniam ipsa fuga
					maxime odio? Eaque!</p>
				<p><a href="reservation.html" class="btn btn-primary btn-outline">Book Now</a></p>
			</div>
		</div>
	</div>
</div>


{% endblock %}


{% block js %}

<script>
	// Find out the cart items from localStorage
	if (localStorage.getItem('cart') == null) {
		var cart = {};
	} else {
		cart = JSON.parse(localStorage.getItem('cart'));
		updateCart(cart);
	}
	// If the add to cart button is clicked, add/increment the item
	//$('.cart').click(function() {
	$('.divpr').on('click', 'button.cart', function() {
		var idstr = this.id.toString();
		if (cart[idstr] != undefined) {
			qty = cart[idstr][0] + 1;
			
		} else {
			qty = 1;
			name = document.getElementById('name'+idstr).innerHTML
			price = document.getElementById('price'+idstr).innerHTML.split('<')[0].split('$ ')[1]

			cart[idstr] = [qty, name, price];
	
		}
		updateCart(cart);
	});
	//Add Popover to cart
	//$('#popcart').popover();
	//updatePopover(cart);
	
	//function updatePopover(cart) {
	// 	console.log('We are inside updatePopover');
	// 	var popStr = "";
	// 	popStr = popStr + "<h5> Cart for your items in my shopping cart </h5><div class='mx-2 my-2'>";
	// 	var i = 1;
	// 	for (var item in cart) {
	// 		popStr = popStr + "<b>" + i + "</b>. ";
	// 		try{
	// 		popStr = popStr + document.getElementById('name' + item).innerHTML+ "... Qty: " + cart[item][0] + cart[item][2] + '<br>';
	// 	}
	// 	catch(error){
			
	// 	}
	// 		i = i + 1;
	// 	}
	// 	popStr = popStr + "</div> <a href='/Brothers_cafe/cart/'><button class='btn btn-primary' id ='checkout'>Checkout</button></a> <button class='btn btn-primary' onclick='clearCart()' id ='clearCart'>Clear Cart</button>     "
	// 	console.log(popStr);
	// 	document.getElementById('popcart').setAttribute('data-content', popStr);
	// 	$('#popcart').popover('show');
	// }
	
	// function clearCart() {
	// 	cart = JSON.parse(localStorage.getItem('cart'));
	// 	for (var item in cart) {
	// 		document.getElementById('div' + item).innerHTML = '<button id="' + item + '" class="btn btn-primary cart">Add To Cart</button>'
	// 	}
	// 	localStorage.clear();
	// 	cart = {};
	// 	updateCart(cart);
	// }
	
	function updateCart(cart) {
		var sum = 0;
		for (var item in cart) {
			sum = sum + cart[item][0];
			try{
			document.getElementById('div' + item).innerHTML = "<button id='minus" + item + "' class='btn btn-success minus'>-</button> <span id='val" + item + "''>" + cart[item][0] + "</span> <button id='plus" + item + "' class='btn btn-success plus'> + </button>";
		}
		catch(error){
			
		}
		}
		localStorage.setItem('cart', JSON.stringify(cart));
		document.getElementById('cart').innerHTML = sum;
		console.log(cart);
	//	updatePopover(cart);
	}
	// If plus or minus button is clicked, change the cart as well as the display value
	$('.divpr').on("click", "button.minus", function() {
		a = this.id.slice(7, );
		cart['pr' + a][0] = cart['pr' + a][0] - 1;
		cart['pr' + a][0] = Math.max(0, cart['pr' + a][0]);
		document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
		updateCart(cart);
	});
	$('.divpr').on("click", "button.plus", function() {
		a = this.id.slice(6, );
		cart['pr' + a][0] = cart['pr' + a][0] + 1;
		document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
		updateCart(cart);
	});
	</script>

{% endblock %}